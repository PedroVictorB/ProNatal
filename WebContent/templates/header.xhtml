<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"   
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:body>
        <ui:composition> 
            <!-- Fixed navbar -->
            <nav class="navbar navbar-inverse navbar-fixed-top" style="box-shadow: 0 16px 24px 2px rgba(0, 0, 0, .14), 0 6px 30px 5px rgba(0, 0, 0, .12), 0 8px 10px -5px rgba(0, 0, 0, .2);">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="#"> ProNatal </a>
                    </div>
                    <div id="navbar" class="collapse navbar-collapse">
                        <ul class="nav navbar-nav">
                            <li class="#{view.viewId == '/index.xhtml' ? 'active' : ''}"> <a href="index.xhtml">Home</a> </li>
                            <li class="#{view.viewId == '/mapa.xhtml' ? 'active' : ''}"> <a href="mapa.xhtml">Mapa</a> </li>
                            <li class="#{view.viewId == '/sobre.xhtml' ? 'active' : ''}"> <a href="#about">Sobre</a> </li>
                            <li class="#{view.viewId == '/contato.xhtml' ? 'active' : ''}"> <a href="#contact">Contato</a> </li>
                            <li class="#{view.viewId == '/feed.xhtml' ? 'active' : ''}"> <a href="feed.xhtml">Postagens</a> </li>
                        </ul>
                        
                        <ul class="nav navbar-nav navbar-right">
                            <li style="display: #{user == null?'block':'none'}" ><a id="registerLink" href="#"><span class="glyphicon glyphicon-user"></span> Cadastrar</a></li>
                            <li style="display: #{user == null?'block':'none'}" ><a id="loginLink" href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                            <li style="display: #{user != null?'block':'none'};color: white;margin-right: 10px;padding-top: 15px;">Bem vindo, #{userBean.user.name}</li>
                            <li style="display: #{user != null?'block':'none'};padding-top: 15px;"><h:form><h:commandLink style="color: firebrick" action="#{userBean.logout()}" value=" Sair"> <span class="glyphicon glyphicon-log-out"></span></h:commandLink></h:form></li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </nav>
            <div id="overlay" class="overlay" style="display: none;">
                <div id="login-wrapper" class="login-wrapper">
                    <div id="login-content" class="login-content">
                        <a id="close" class="close">x</a>
                        <h3>Login</h3>
                        <h:form>
                            <p:growl id="growl" life="2000"/>
                            <label for="email">
                                Email
                                <p:inputText id="email" placeholder="Email" required="true" value="#{userBean.user.email}" validatorMessage="Email Inválido!">
                                    <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                    <f:validateLength minimum="5"></f:validateLength>
                                </p:inputText>
                            </label>
                            <label for="password">
                                <h:outputText value="Senha " />
                                <p:password id="password" value="#{userBean.user.password}" placeholder="***********" required="true" validatorMessage="Digite a senha corretamente!">
                                    <f:validateLength minimum="6" maximum="20"></f:validateLength>
                                </p:password>
                            </label>
                            <p:commandButton class="botao_registro" action="#{userBean.login()}" value="Entrar" update="growl" ajax="false"></p:commandButton>
                        </h:form>
                    </div>
                </div>
            </div>
            <div id="overlay2" class="overlay" style="display: none;">
                <div id="login-wrapper2" class="login-wrapper">
                    <div id="login-content2" class="login-content" style="">
                        <a id="close2" class="close">x</a>
                        <h3>Registro</h3>
                        <h:form id="registerform">
                            <p:growl id="growl" life="2000"/>
                            <label for="username">
                                <p:outputLabel value="Nome" for="username"/>
                                <p:inputText id="username" placeholder="Nome Completo" required="true" value="#{registerBean.user.name}" size="80" validatorMessage="Digite um nome correto!">
                                    <f:validateRegex pattern="[a-zA-Z]+"/>
                                    <f:validateLength minimum="3"></f:validateLength>
                                </p:inputText>
                            </label>
                            <label for="email">
                                <p:outputLabel value="Email" for="email"/>
                                <p:inputText id="email" placeholder="Email" required="true" value="#{registerBean.user.email}" size="40" validatorMessage="Email Inválido!" autocomplete="true">
                                    <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                    <f:validateLength minimum="5"></f:validateLength>
                                </p:inputText>

                            </label>
                            <label for="date">
                                <p:outputLabel for="date" value="Data de Nascimento" />
                                <p:calendar id="date" value="#{registerBean.user.birthDate}" effect="fade" placeholder="dd/mm/aaaa" yearRange="c-100:c" 
                                            navigator="true" validatorMessage="Digite uma data correta!" required="true">
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </p:calendar>
                            </label>
                            <label for="password">
                                <p:outputLabel value="Senha" for="password"/>
                                <p:password id="password" value="#{registerBean.user.password}" feedback="true" placeholder="***********" 
                                            promptLabel="Força da senha" weakLabel="Fraca" goodLabel="Média" strongLabel="Forte" required="true" match="password2" 
                                            validatorMessage="Digite a senha corretamente!">
                                    <f:validateLength minimum="6"></f:validateLength>
                                    <f:validateLength minimum="6" maximum="20"></f:validateLength>
                                </p:password>
                                <p:outputLabel for="password2" value="Confirme a senha" />
                                <p:password id="password2" value="#{registerBean.user.password}" feedback="true" placeholder="***********" 
                                            promptLabel="Força da senha" weakLabel="Fraca" goodLabel="Média" strongLabel="Forte" required="true">
                                    <f:validateLength minimum="6" maximum="20"></f:validateLength>
                                </p:password>
                            </label>
                            <p:commandButton class="botao_registro" action="#{registerBean.register()}" value="Registrar" update="growl" ajax="false"></p:commandButton>
                        </h:form>
                    </div>
                </div>
            </div>
        </ui:composition>	
    </h:body>
</html>